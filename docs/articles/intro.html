<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with getTBinR • Get WHO Tuberculosis Data in R</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with getTBinR">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">getTBinR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/intro.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Case Studies
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/case_study_global_trends.html">Exploring Global Trends in Tuberculosis Incidence Rates</a>
    </li>
    <li>
      <a href="../articles/case_fatality_rate.html">Exploring Estimates of the Tuberculosis Case Fatality Ratio</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Dashboards
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://www.seabbs.co.uk/shiny/ExploreGlobalTB/">Explore Global Tuberculosis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/seabbs/getTBinR">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting started with getTBinR</h1>
                        <h4 class="author">Sam Abbott</h4>
            
            <h4 class="date">2018-03-14</h4>
          </div>

    
    
<div class="contents">
<div id="using-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-package" class="anchor"></a>Using the package</h2>
<p>First load the package. We also load several other packages to help quickly explore the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(getTBinR)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(knitr)
<span class="kw">library</span>(magrittr)
<span class="kw">library</span>(dplyr)</code></pre></div>
</div>
<div id="getting-tb-burden-data" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-tb-burden-data" class="anchor"></a>Getting TB burden data</h2>
<p>Get TB burden data with a single function call. This will download the data if it has never been accessed and then save a local copy to R’s temporary directory (see <code>tempdir()</code>). If a local copy exists from the current seesion then this will be loaded instead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tb_burden &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_tb_burden.html">get_tb_burden</a></span>()
<span class="co">#&gt; Downloading data from: https://extranet.who.int/tme/generateCSV.asp?ds=estimates</span>
<span class="co">#&gt; Saving data to: /tmp/RtmpQd7Nb9/TB_burden.rds</span>
<span class="co">#&gt; Downloading data from: https://extranet.who.int/tme/generateCSV.asp?ds=mdr_rr_estimates</span>
<span class="co">#&gt; Saving data to: /tmp/RtmpQd7Nb9/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>

tb_burden
<span class="co">#&gt; # A tibble: 3,651 x 91</span>
<span class="co">#&gt;    country  iso2  iso3  iso_numeric g_whoregion  year e_pop_num e_inc_100k</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;       &lt;int&gt;     &lt;int&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Afghani… AF    AFG             4 Eastern Me…  2000  20093756       190.</span>
<span class="co">#&gt;  2 Afghani… AF    AFG             4 Eastern Me…  2001  20966463       189.</span>
<span class="co">#&gt;  3 Afghani… AF    AFG             4 Eastern Me…  2002  21979923       189.</span>
<span class="co">#&gt;  4 Afghani… AF    AFG             4 Eastern Me…  2003  23064851       189.</span>
<span class="co">#&gt;  5 Afghani… AF    AFG             4 Eastern Me…  2004  24118979       189.</span>
<span class="co">#&gt;  6 Afghani… AF    AFG             4 Eastern Me…  2005  25070798       189.</span>
<span class="co">#&gt;  7 Afghani… AF    AFG             4 Eastern Me…  2006  25893450       189.</span>
<span class="co">#&gt;  8 Afghani… AF    AFG             4 Eastern Me…  2007  26616792       189.</span>
<span class="co">#&gt;  9 Afghani… AF    AFG             4 Eastern Me…  2008  27294031       189.</span>
<span class="co">#&gt; 10 Afghani… AF    AFG             4 Eastern Me…  2009  28004331       189.</span>
<span class="co">#&gt; # ... with 3,641 more rows, and 83 more variables: e_inc_100k_lo &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_inc_100k_hi &lt;dbl&gt;, e_inc_num &lt;int&gt;, e_inc_num_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_hi &lt;int&gt;, e_inc_num_f014 &lt;int&gt;, e_inc_num_f014_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_f014_hi &lt;int&gt;, e_inc_num_f15plus &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_f15plus_lo &lt;int&gt;, e_inc_num_f15plus_hi &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_f &lt;int&gt;, e_inc_num_f_lo &lt;int&gt;, e_inc_num_f_hi &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_m014 &lt;int&gt;, e_inc_num_m014_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_m014_hi &lt;int&gt;, e_inc_num_m15plus &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_m15plus_lo &lt;int&gt;, e_inc_num_m15plus_hi &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_m &lt;int&gt;, e_inc_num_m_lo &lt;int&gt;, e_inc_num_m_hi &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_014 &lt;int&gt;, e_inc_num_014_lo &lt;int&gt;, e_inc_num_014_hi &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_15plus &lt;int&gt;, e_inc_num_15plus_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_num_15plus_hi &lt;int&gt;, e_tbhiv_prct &lt;dbl&gt;, e_tbhiv_prct_lo &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_tbhiv_prct_hi &lt;dbl&gt;, e_inc_tbhiv_100k &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_inc_tbhiv_100k_lo &lt;dbl&gt;, e_inc_tbhiv_100k_hi &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_inc_tbhiv_num &lt;int&gt;, e_inc_tbhiv_num_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_tbhiv_num_hi &lt;int&gt;, e_mort_exc_tbhiv_100k &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_mort_exc_tbhiv_100k_lo &lt;dbl&gt;, e_mort_exc_tbhiv_100k_hi &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_mort_exc_tbhiv_num &lt;int&gt;, e_mort_exc_tbhiv_num_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_mort_exc_tbhiv_num_hi &lt;int&gt;, e_mort_tbhiv_100k &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_mort_tbhiv_100k_lo &lt;dbl&gt;, e_mort_tbhiv_100k_hi &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_mort_tbhiv_num &lt;int&gt;, e_mort_tbhiv_num_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_mort_tbhiv_num_hi &lt;int&gt;, e_mort_100k &lt;dbl&gt;, e_mort_100k_lo &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_mort_100k_hi &lt;dbl&gt;, e_mort_num &lt;int&gt;, e_mort_num_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_mort_num_hi &lt;int&gt;, cfr &lt;dbl&gt;, cfr_lo &lt;dbl&gt;, cfr_hi &lt;dbl&gt;,</span>
<span class="co">#&gt; #   c_newinc_100k &lt;dbl&gt;, c_cdr &lt;dbl&gt;, c_cdr_lo &lt;dbl&gt;, c_cdr_hi &lt;dbl&gt;,</span>
<span class="co">#&gt; #   source_rr_new &lt;chr&gt;, source_drs_coverage_new &lt;chr&gt;,</span>
<span class="co">#&gt; #   source_drs_year_new &lt;chr&gt;, e_rr_pct_new &lt;dbl&gt;, e_rr_pct_new_lo &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_rr_pct_new_hi &lt;dbl&gt;, e_mdr_pct_rr_new &lt;int&gt;, source_rr_ret &lt;chr&gt;,</span>
<span class="co">#&gt; #   source_drs_coverage_ret &lt;chr&gt;, source_drs_year_ret &lt;chr&gt;,</span>
<span class="co">#&gt; #   e_rr_pct_ret &lt;dbl&gt;, e_rr_pct_ret_lo &lt;dbl&gt;, e_rr_pct_ret_hi &lt;dbl&gt;,</span>
<span class="co">#&gt; #   e_mdr_pct_rr_ret &lt;int&gt;, e_inc_rr_num &lt;int&gt;, e_inc_rr_num_lo &lt;int&gt;,</span>
<span class="co">#&gt; #   e_inc_rr_num_hi &lt;int&gt;, e_rr_in_notified_pulm &lt;int&gt;,</span>
<span class="co">#&gt; #   e_rr_in_notified_pulm_lo &lt;int&gt;, e_rr_in_notified_pulm_hi &lt;int&gt;</span></code></pre></div>
</div>
<div id="searching-for-variable-definitions" class="section level2">
<h2 class="hasAnchor">
<a href="#searching-for-variable-definitions" class="anchor"></a>Searching for variable definitions</h2>
<p>The WHO provides a large, detailed, data dictionary for use with the TB burden data. However, searching through this dataset can be tedious. To streamline this process <code>getTBinR</code> provides a search function to find the definition of a single or multiple variables. Again if not previously used this function will download the data dictionary to the temporary directory, but in subsequent uses will load a local copy.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vars_of_interest &lt;-<span class="st"> </span><span class="kw"><a href="../reference/search_data_dict.html">search_data_dict</a></span>(<span class="dt">var =</span> <span class="kw">c</span>(<span class="st">"country"</span>,
                                             <span class="st">"e_inc_100k"</span>,
                                             <span class="st">"e_inc_100k_lo"</span>,
                                             <span class="st">"e_inc_100k_hi"</span>))
<span class="co">#&gt; Downloading data from: https://extranet.who.int/tme/generateCSV.asp?ds=dictionary</span>
<span class="co">#&gt; Saving data to: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 4 results found for your variable search for country, e_inc_100k, e_inc_100k_lo, e_inc_100k_hi</span>

knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(vars_of_interest)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable_name</th>
<th align="left">dataset</th>
<th align="left">code_list</th>
<th align="left">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">country</td>
<td align="left">Country identification</td>
<td align="left"></td>
<td align="left">Country or territory name</td>
</tr>
<tr class="even">
<td align="left">e_inc_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence (all forms) per 100 000 population</td>
</tr>
<tr class="odd">
<td align="left">e_inc_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence (all forms) per 100 000 population, high bound</td>
</tr>
<tr class="even">
<td align="left">e_inc_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence (all forms) per 100 000 population, low bound</td>
</tr>
</tbody>
</table>
<p>We might also want to search the variable definitions for key phrases, for example mortality.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">defs_of_interest &lt;-<span class="st"> </span><span class="kw"><a href="../reference/search_data_dict.html">search_data_dict</a></span>(<span class="dt">def =</span> <span class="kw">c</span>(<span class="st">"mortality"</span>))
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 9 results found for your definition search for mortality</span>

knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(defs_of_interest)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable_name</th>
<th align="left">dataset</th>
<th align="left">code_list</th>
<th align="left">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">e_mort_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms) per 100 000 population</td>
</tr>
<tr class="even">
<td align="left">e_mort_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms) per 100 000 population, high bound</td>
</tr>
<tr class="odd">
<td align="left">e_mort_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms) per 100 000 population, low bound</td>
</tr>
<tr class="even">
<td align="left">e_mort_exc_tbhiv_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms, excluding HIV) per 100 000 population</td>
</tr>
<tr class="odd">
<td align="left">e_mort_exc_tbhiv_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms, excluding HIV), per 100 000 population, high bound</td>
</tr>
<tr class="even">
<td align="left">e_mort_exc_tbhiv_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms, excluding HIV), per 100 000 population, low bound</td>
</tr>
<tr class="odd">
<td align="left">e_mort_tbhiv_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases who are HIV-positive, per 100 000 population</td>
</tr>
<tr class="even">
<td align="left">e_mort_tbhiv_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases who are HIV-positive, per 100 000 population, high bound</td>
</tr>
<tr class="odd">
<td align="left">e_mort_tbhiv_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases who are HIV-positive, per 100 000 population, low bound</td>
</tr>
</tbody>
</table>
<p>Finally we could both search for a known variable and for key phrases in variable definitions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vars_defs_of_interest &lt;-<span class="st"> </span><span class="kw"><a href="../reference/search_data_dict.html">search_data_dict</a></span>(<span class="dt">var =</span> <span class="kw">c</span>(<span class="st">"country"</span>),
                                     <span class="dt">def =</span> <span class="kw">c</span>(<span class="st">"mortality"</span>))
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for country</span>
<span class="co">#&gt; 9 results found for your definition search for mortality</span>

knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(vars_defs_of_interest)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable_name</th>
<th align="left">dataset</th>
<th align="left">code_list</th>
<th align="left">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">country</td>
<td align="left">Country identification</td>
<td align="left"></td>
<td align="left">Country or territory name</td>
</tr>
<tr class="even">
<td align="left">e_mort_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms) per 100 000 population</td>
</tr>
<tr class="odd">
<td align="left">e_mort_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms) per 100 000 population, high bound</td>
</tr>
<tr class="even">
<td align="left">e_mort_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms) per 100 000 population, low bound</td>
</tr>
<tr class="odd">
<td align="left">e_mort_exc_tbhiv_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms, excluding HIV) per 100 000 population</td>
</tr>
<tr class="even">
<td align="left">e_mort_exc_tbhiv_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms, excluding HIV), per 100 000 population, high bound</td>
</tr>
<tr class="odd">
<td align="left">e_mort_exc_tbhiv_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases (all forms, excluding HIV), per 100 000 population, low bound</td>
</tr>
<tr class="even">
<td align="left">e_mort_tbhiv_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases who are HIV-positive, per 100 000 population</td>
</tr>
<tr class="odd">
<td align="left">e_mort_tbhiv_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases who are HIV-positive, per 100 000 population, high bound</td>
</tr>
<tr class="even">
<td align="left">e_mort_tbhiv_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated mortality of TB cases who are HIV-positive, per 100 000 population, low bound</td>
</tr>
</tbody>
</table>
</div>
<div id="mapping-global-incidence-rates" class="section level2">
<h2 class="hasAnchor">
<a href="#mapping-global-incidence-rates" class="anchor"></a>Mapping Global Incidence Rates</h2>
<p>To start exploring the WHO TB data we map global TB incidence rates in 2016. Mapping data can help identify spatial patterns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="https://samabbott.co.uk/getTBinR//reference/map_tb_burden.html">map_tb_burden</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
                        <span class="dt">year =</span> <span class="dv">2016</span>)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/map-tb-incidence-eur-1.png" width="1440" style="display: block; margin: auto;"></p>
</div>
<div id="plotting-incidence-rates-for-all-countries" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-incidence-rates-for-all-countries" class="anchor"></a>Plotting Incidence Rates for All Countries</h2>
<p>To showcase how quickly we can go from no data to plotting informative graphs we quickly explore incidence rates for all countries in the WHO data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="https://samabbott.co.uk/getTBinR//reference/plot_tb_burden_overview.html">plot_tb_burden_overview</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
                                  <span class="dt">interactive =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-tb-all-1.png" width="960" style="display: block; margin: auto;"></p>
<p>Another way to compre incidence rates in countries is to look at the annual percentage change (currently only available in the development version of the package). The plot below only shows countries with a maximum incidence rate above 5 per 100,000.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">higher_burden_countries &lt;-<span class="st"> </span>tb_burden <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(country) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">e_inc_100k =</span> <span class="kw">min</span>(e_inc_100k)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(e_inc_100k <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(country) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>unique

getTBinR<span class="op">::</span><span class="kw"><a href="https://samabbott.co.uk/getTBinR//reference/plot_tb_burden_overview.html">plot_tb_burden_overview</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
                                  <span class="dt">interactive =</span> <span class="ot">FALSE</span>,
                                  <span class="dt">annual_change =</span> <span class="ot">TRUE</span>,
                                  <span class="dt">countries =</span> higher_burden_countries)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-tb-al-per-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
<div id="plotting-incidence-rates-over-time-in-9-randomly-sampled-countries" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-incidence-rates-over-time-in-9-randomly-sampled-countries" class="anchor"></a>Plotting Incidence Rates over Time in 9 Randomly Sampled Countries</h2>
<p>Now that we have the data lets plot a sample of 9 countries using the inbuilt <code>plot_tb_burden</code> function. Again plotting incidence rates, but this time with 95% confidence intervals. As you can see this isnt a hugely informative graph. Lets improve it!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Take a random sample of countries
sample_countries &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(<span class="kw">unique</span>(tb_burden<span class="op">$</span>country), <span class="dv">9</span>)
<span class="kw"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(tb_burden, <span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
               <span class="dt">countries =</span> sample_countries)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-incidence-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We have faceted by country so that we can more easily see what is going on. This allows us to easily explore between country variation - depending on the sample there is likely to be alot of this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(tb_burden, <span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
               <span class="dt">countries =</span> sample_countries,
               <span class="dt">facet =</span> <span class="st">"country"</span>)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-incidence-facet-1.png" width="672" style="display: block; margin: auto;"></p>
<p>To explore within country variation we need to change the scale of the y axis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(tb_burden, <span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
               <span class="dt">countries =</span> sample_countries,
               <span class="dt">facet =</span> <span class="st">"country"</span>,
               <span class="dt">scales =</span> <span class="st">"free_y"</span>)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-incidence-facet-free-y-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We might also be interested in mortality in both HIV negative and HIV positive cases in our sample countries. We can also look at this using <code>plot_tb_burden</code> as follows. Note we can do this without specifying the TB burden data, the plotting function will automatically find it either locally or remotely.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(<span class="dt">metric =</span> <span class="st">"e_mort_exc_tbhiv_100k"</span>,
               <span class="dt">countries =</span> sample_countries,
               <span class="dt">facet =</span> <span class="st">"country"</span>,
               <span class="dt">scales =</span> <span class="st">"free_y"</span>)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_mort_exc_tbhiv_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-mortality-excluding-hiv-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(<span class="dt">metric =</span> <span class="st">"e_mort_tbhiv_100k"</span>,
               <span class="dt">countries =</span> sample_countries,
               <span class="dt">facet =</span> <span class="st">"country"</span>,
               <span class="dt">scales =</span> <span class="st">"free_y"</span>)
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/RtmpQd7Nb9/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_mort_tbhiv_100k</span></code></pre></div>
<p><img src="intro_files/figure-html/plot-mortality-including-hiv-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#using-the-package">Using the package</a></li>
      <li><a href="#getting-tb-burden-data">Getting TB burden data</a></li>
      <li><a href="#searching-for-variable-definitions">Searching for variable definitions</a></li>
      <li><a href="#mapping-global-incidence-rates">Mapping Global Incidence Rates</a></li>
      <li><a href="#plotting-incidence-rates-for-all-countries">Plotting Incidence Rates for All Countries</a></li>
      <li><a href="#plotting-incidence-rates-over-time-in-9-randomly-sampled-countries">Plotting Incidence Rates over Time in 9 Randomly Sampled Countries</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sam Abbott.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
