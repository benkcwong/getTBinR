<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get WHO Tuberculosis Data • getTBinR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Get WHO Tuberculosis Data">
<meta property="og:description" content="Facilitates easy import of analysis ready World Health Organisation Tuberculosis data and provides plotting functions for exploratory data analysis.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">getTBinR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="articles/intro.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Case Studies
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/case_study_global_trends.html">Exploring Global Trends in Tuberculosis Incidence Rates</a>
    </li>
    <li>
      <a href="articles/case_fatality_rate.html">Exploring Estimates of the Tuberculosis Case Fatality Ratio</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Dashboards
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://www.seabbs.co.uk/shiny/ExploreGlobalTB/">Explore Global Tuberculosis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://www.samabbott.co.uk/tags/who/">Blog posts</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="news/index.html">Change log</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/seabbs/getTBinR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="get-tb-data-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#get-tb-data-in-r" class="anchor"></a>Get TB Data in R <img src="man/figure/logo.png" align="right" alt="" width="120">
</h1></div>

<p>Quickly and easily import analysis ready TB burden data, from the World Health Organisation (WHO), into R. The aim of the package is to speed up access to high quality TB burden data, using a simple R interface. Generic plotting functions are provided to allow for rapid graphical exploration of the WHO TB data. A shiny dashboard is built in to showcase package functionality. See <a href="http://www.who.int/about/copyright/en/">here</a> for the WHO data permissions. For help getting started see the <a href="https://www.samabbott.co.uk/getTBinR/articles/intro.html">Getting Started</a> vignette and for a case study using the package see the <a href="https://www.samabbott.co.uk/getTBinR/articles/case_study_global_trends.html">Exploring Global Trends in Tuberculosis Incidence Rates</a> vignette. See <a href="https://www.samabbott.co.uk/getTBinR/dev">here</a> for the development documentation.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the CRAN version:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"getTBinR"</span>)</code></pre></div>
<p>Alternatively install the development version from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"seabbs/getTBinR"</span>)</code></pre></div>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<p>Lets get started quickly by mapping and then plotting TB incidence rates in the United Kingdom. First map the most recently available global TB incidence rates (this will also download and save both the TB burden data and its data dictionary, if they are not found locally, to R’s temporary directory),</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="samabbott.co.uk/getTBinR//reference/map_tb_burden.html">map_tb_burden</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>)
<span class="co">#&gt; Downloading data from: https://extranet.who.int/tme/generateCSV.asp?ds=estimates</span>
<span class="co">#&gt; Saving data to: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Downloading data from: https://extranet.who.int/tme/generateCSV.asp?ds=mdr_rr_estimates</span>
<span class="co">#&gt; Saving data to: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Downloading data from: https://extranet.who.int/tme/generateCSV.asp?ds=dictionary</span>
<span class="co">#&gt; Saving data to: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="man/figure/map-tb-incidence-eur-1.png" width="768"></p>
<p>Then compare TB incidence rates in the UK to TB incidence rates in other countries in the region,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="samabbott.co.uk/getTBinR//reference/plot_tb_burden_overview.html">plot_tb_burden_overview</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
                                  <span class="dt">countries =</span> <span class="st">"United Kingdom"</span>,
                                  <span class="dt">compare_to_region =</span> <span class="ot">TRUE</span>,
                                  <span class="dt">interactive =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="man/figure/plot-tb-incidence-eur-1.png" width="700"></p>
<p>In order to compare the changes in incidence rates over time, in the region, plot the annual percentage change,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="samabbott.co.uk/getTBinR//reference/plot_tb_burden_overview.html">plot_tb_burden_overview</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
                                  <span class="dt">countries =</span> <span class="st">"United Kingdom"</span>,
                                  <span class="dt">compare_to_region =</span> <span class="ot">TRUE</span>,
                                  <span class="dt">annual_change =</span> <span class="ot">TRUE</span>,
                                  <span class="dt">interactive =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="man/figure/plot-tb-incidence-eur-per-1.png" width="700"></p>
<p>Now plot TB incidence rates over time in the United Kingdom, compared to TB incidence rates in Europe and globally.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="samabbott.co.uk/getTBinR//reference/plot_tb_burden_summary.html">plot_tb_burden_summary</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_num"</span>,
                                 <span class="dt">metric_label =</span> <span class="st">"e_inc_100k"</span>,
                                 <span class="dt">countries =</span> <span class="st">"United Kingdom"</span>,
                                 <span class="dt">legend =</span> <span class="st">"top"</span>,
                                 <span class="dt">compare_all_regions =</span> <span class="ot">FALSE</span>,
                                 <span class="dt">compare_to_region =</span> <span class="ot">TRUE</span>,
                                 <span class="dt">compare_to_world =</span> <span class="ot">TRUE</span>,
                                 <span class="dt">interactive =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span>
<span class="co">#&gt; Extracting data for specified countries</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_num</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_num</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_num</span></code></pre></div>
<p><img src="man/figure/plot-tb-incidence-uk-compare-1.png" width="700"></p>
<p>Finally we repeat the above plot but this time only for the UK - this allows us to get a clear picture of trends in TB incidence rates in the UK.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="samabbott.co.uk/getTBinR//reference/plot_tb_burden.html">plot_tb_burden</a></span>(<span class="dt">metric =</span> <span class="st">"e_inc_100k"</span>,
                         <span class="dt">countries =</span> <span class="st">"United Kingdom"</span>,
                         <span class="dt">interactive =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_burden.rds</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/MDR_TB.rds</span>
<span class="co">#&gt; Joining TB burden data and MDR TB data.</span>
<span class="co">#&gt; Loading data from: /tmp/Rtmp6977eW/TB_data_dict.rds</span>
<span class="co">#&gt; 1 results found for your variable search for e_inc_100k</span></code></pre></div>
<p><img src="man/figure/plot-tb-incidence-uk-1.png" width="700"></p>
<p>See <a href="https://www.samabbott.co.uk/getTBinR/reference/index.html">Functions</a> for more details of the functions used (note the fuzzy country matching, <code>map_tb_burden</code>, <code>plot_tb_burden_overview</code>, <code>plot_tb_burden_summary</code> and <code>plot_tb_burden</code> will try to exactly match your country request and if that fails will search for partial matches) and for more package functionality. We could make these plots interactive by specifying <code>interactive = TRUE</code></p>
</div>
<div id="shiny-dashboard" class="section level2">
<h2 class="hasAnchor">
<a href="#shiny-dashboard" class="anchor"></a>Shiny Dashboard</h2>
<p>To explore the package functionality in an interactive session, or to investigate TB without having to code extensively in R, a shiny dashboard has been built into the package. This can either be used locally using,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">getTBinR<span class="op">::</span><span class="kw"><a href="samabbott.co.uk/getTBinR//reference/run_tb_dashboard.html">run_tb_dashboard</a></span>()</code></pre></div>
<p>Or accessed <a href="http://www.seabbs.co.uk/shiny/ExploreGlobalTB">online</a>. Any metric in the WHO data can be explored, with country selection using the built in map, and animation possible by year.</p>
<div class="figure">
<img src="man/img/ExploreGlobalTB.png" alt="Snapshot of the integrated dashboard."><p class="caption">Snapshot of the integrated dashboard.</p>
</div>
</div>
<div id="country-report" class="section level2">
<h2 class="hasAnchor">
<a href="#country-report" class="anchor"></a>Country Report</h2>
<p>To get a detailed overview of TB in a country of your choice run the following, alternatively available from the built in dashboard above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Code saves report into your current working directory
<span class="kw"><a href="reference/render_country_report.html">render_country_report</a></span>(<span class="dt">country =</span> <span class="st">"United Kingdom"</span>, <span class="dt">save_dir =</span> <span class="st">"."</span>)</code></pre></div>
<div class="figure">
<img src="man/img/ExampleCountryReport.png" alt="Example report for the United Kingdom."><p class="caption">Example report for the United Kingdom.</p>
</div>
</div>
<div id="additional-functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-functionality" class="anchor"></a>Additional Functionality</h2>
<p>File an issue <a href="https://github.com/seabbs/getTBinR/issues">here</a> if there is a feature, or a dataset, that you think is missing from the package, or better yet submit a pull request!</p>
</div>
<div id="docker" class="section level2">
<h2 class="hasAnchor">
<a href="#docker" class="anchor"></a>Docker</h2>
<p>This package has been developed in docker based on the <code>rocker/tidyverse</code> image, to access the development environment enter the following at the command line (with an active docker daemon running),</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">docker</span> pull seabbs/gettbinr
<span class="ex">docker</span> run -d -p 8787:8787 -e USER=getTBinR -e PASSWORD=getTBinR --name getTBinR seabbs/gettbinr</code></pre></div>
<p>The rstudio client can be accessed on port <code>8787</code> at <code>localhost</code> (or your machines ip). The default username is getTBinR and the default password is getTBinR.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=getTBinR">https://​cloud.r-project.org/​package=getTBinR</a>
</li>
<li>Browse source code at <br><a href="https://github.com/seabbs/getTBinR">https://​github.com/​seabbs/​getTBinR</a>
</li>
<li>Report a bug at <br><a href="https://github.com/seabbs/getTBinR/issues">https://​github.com/​seabbs/​getTBinR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Abbott <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=getTBinR"><img src="http://www.r-pkg.org/badges/version-ago/getTBinR" alt="CRAN_Release_Badge"></a></li>
<li><a href="https://github.com/getTBinR"><img src="https://img.shields.io/badge/devel%20version-0.5.7-blue.svg?style=flat" alt="develVersion"></a></li>
<li><a href="https://travis-ci.org/seabbs/getTBinR"><img src="https://travis-ci.org/seabbs/getTBinR.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/seabbs/getTBinR"><img src="https://ci.appveyor.com/api/projects/status/github/seabbs/getTBinR?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/seabbs/getTBinR?branch=master"><img src="https://img.shields.io/codecov/c/github/seabbs/getTBinR/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/package=getTBinR"><img src="http://cranlogs.r-pkg.org/badges/getTBinR" alt="metacran monthly downloads"></a></li>
<li><a href="https://cran.r-project.org/package=getTBinR"><img src="http://cranlogs.r-pkg.org/badges/grand-total/getTBinR?color=ff69b4" alt="metacran downloads"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/112591837"><img src="https://zenodo.org/badge/112591837.svg" alt="DOI"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sam Abbott.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '6c737a6c632ea7eab75c912a6b07b5f1',
    indexName: 'gettbinr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
